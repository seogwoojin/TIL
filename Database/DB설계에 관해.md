# 좋은 DB 설계 (하고 싶다)

좋은 데이터베이스 설계란 무엇일까

저는 극단적인 T라 '돈'이라는 것을 기준으로 데이터베이스를 설계하는 방법을 몇 가지 작성하겠습니다.

좋은 데이터베이스는 돈이 되기 때문이죠


### 좋지 않은 데이터베이스 설계로 인한 문제

1. 실제 서비스에선 4만원에 파는 물건이 5만원으로 DB에 저장된 경우.. 신뢰성이 없는 데이터베이스
2. 요구 사항 변경에 너무 많은 품이 듬 .. 확장성이 없는 데이터베이스
3. 오래 걸리는 데이터베이스 .. 느린 데이터베이스

이 3가지는 모두 손해로 직결됩니다.

### 좋은 데이터베이스

'파워 오브 데이터베이스'의 저자이자 20년 이상의 경험을 가진 관계형 데이터베이스의 베테랑 개발자 마이클 J. 헤르난데즈는 다음과 같은 목적들에 초점을 맞추어 설계하라고 합니다.

무결성 - 데이터베이스 내에 모든 값은 언제나 정확한 값을 유지해야 한다.

유연성 - 데이터베이스 구조는 요구사항 변화에 대해 수정이 쉬워야 한다.

확장성 - 데이터베이스 구조는 기능 확장에 대해서 수정이 쉬워야 한다.

그 이유는 바로 이러한 목적으로 설계된 데이터베이스가 돈을 많이 벌어다 주고 이것이 경험을 통해 증명됐기 때문입니다.


### 설계 해보자

1. 단일 주제 기반 엔티티

개체 또는 사건일 수 있는 단일 주제를 나타낸다.
테이블이 단일 주제를 나타내는 것은 가장 중요합니다. 대부분의 문제가 테이블이 여러 주제를 나타낼 때 일어납니다.

2. 다치 애트리뷰트를 빼자.

여러 값이 들어가는 속성 분리

3. 계산을 통해 얻은 속성은 제거한다

### 적절한 필드 특성 정하기

1. Varchar VS Char

Char는 처음부터 고정된 바이트 만큼 할당함. 수정에는 약간 유리하지만, 저장공간 많이먹음

디비는 기본적으로 읽기가 8:2를 차지할 만큼 읽기 비중이 높음. 따라서 Varchar를 쓰자

2. ENUM 데이터타입 vs 참조테이블

자주 변경이 일어날 지점에는 참조테이블이 유연하다.

Enum은 성능이 좋다.

위 기준에 맞춰 적절히 사용하면 될듯. 

### 정규화 진행하기

1,2,3, BCNF에 맞춰 정규화를 진행한다.

이 단계를 거친 후, 성능상에 이점이 크다면 반정규화를 진행한다.
